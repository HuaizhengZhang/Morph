$def with (task_id, state, res)

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
        <title>Welcome to Morph!</title> 
        <link rel="stylesheet" type="text/css" href="/morph/static/morph.css"> 
        <link rel="SHORTCUT ICON" href="/morph/static/favicon.ico"> 
    </head>

    <body onload="update_progress();">
    <script language="javascript">
    var timer = null;
    function update_progress() {
        timer = setInterval(get_progress, 5000);
    }

    function get_tgt_files() {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                document.getElementById("final_msg").innerHTML = xhr.responseText;
            }
        }
        xhr.open("POST", "/morph/get_tgt_files", true);
        xhr.send("key=$task_id");
    }

    function get_progress() {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                document.getElementById("trans_prog").value = xhr.responseText;
                prog = parseInt(xhr.responseText)
                if (prog < 0 || prog >= 100) {
                    clearInterval(timer);
                    if (prog != 100)
                        document.getElementById("trans_prog").value = 'Error';
                    if (prog == 100)
                        get_tgt_files();
                }
            }
        };
        xhr.open("POST", "/morph/get_progress", true);
        xhr.send("key=$task_id");
    }
</script>
 
        <div id="header">
            <table class="header">
                <tbody>
                    <tr>
                        <td class="logo"><a href="http://155.69.146.43/morph" title="Home"><img src="/morph/static/morph.gif" alt=""></a></td> 
                        <td class="blurb">"Morph is a fast and scalable cloud transcoding system."[<a href="http://morph.aidynamic.com/">more...</a>]</td> 
                    </tr>
                </tbody>
            </table>
        </div> 

        <div id="location"> 
                <a href="http://155.69.146.43/morph">home</a> &gt; Welcome to Morph!
        </div>
         
        <div id="container"> 
        <div id="sidebar">
        <strong>get started</strong>
        <ul class="body">
            <li><a href="http://webpy.org/install">install</a></li>
            <li><a href="http://webpy.org/docs/0.3/tutorial">tutorial</a></li>
        </ul>

        <strong>system info</strong>
            <ul class="body">
                <li><a href="http://webpy.org/docs/0.3/api">api reference</a></li>
                <li><a href="http://webpy.org/cookbook/">cookbook</a></li>
                <li><a href="http://webpy.org/src/">code examples</a></li>
            </ul>

        <strong>dive in</strong>
            <ul class="body"> 
                <li><a href="https://github.com/cap-ntu/Morph">source code</a></li>
                <li><a href="http://morph.aidynamic.com/">project page</a></li>
                <li><a href="https://github.com/cap-ntu/Morph/wiki">wiki page</a></li>
                <li><a href="https://github.com/cap-ntu/Morph/issues">issue tracker</a></li>
            </ul>
        </div>

        <div id="main"> 
        <div id="content" class="body">
        <br>
        <h2>Transcoding progress</h2>
        <br>
        <fieldset>
            Task ID: $task_id       <br>
            Submit state: $state    <br>
            Target resolution: $res <br>
            Progress: <input type="text" name="progress" id="trans_prog" value="waiting" readonly><br>
            Don't refresh, the progress can be updated automatically! <br>
        </fieldset>
        <br>
        <div id="final_msg"/>
        <br>
        <br>

        </div> 
        </div>

    <div id="footer"> 
        <p>started by <a style="color: gray;" href="http://cap.sce.ntu.edu.sg/">CAP, NTU</a> (<a style="color: black;" href="mailto:ggao001@ntu.edu.sg">ggao001@ntu.edu.sg</a>)</p>
        <p><a href="https://github.com/cap-ntu/Morph">fork this page on GitHub</a></p>
        <p>with thanks to Web.py!</p>
    </div> 

<audio controls="controls" style="display: none;"></audio></body><style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}</style></html>
